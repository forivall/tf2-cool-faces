// Generated by CoffeeScript 1.8.0
var fs, getRandomTag, lysergix, tags;

fs = require('fs');

lysergix = require('lysergix');

tags = ['angry', 'love', 'confused', 'crazy', 'smug', 'surprised', 'hurt', 'sad', 'dancing', 'laughing', 'giving up', 'running', 'other actions', 'evil', 'friends', 'meh'];

getRandomTag = function() {
  return tags[Math.floor(Math.random() * tags.length)];
};

module.exports = function(filename) {
  var faceRunner, makeFace, timeoutId;
  timeoutId = null;
  makeFace = function() {
    var face, newFace;
    face = lysergix.getRandomFace(getRandomTag());
    newFace = "// " + (face.description || face.tag) + "\nsay \"" + face.content + "\"\n";
    return fs.writeFile(filename, newFace, function(err) {
      if (err) {
        return console.log(err);
      }
      timeoutId = setTimeout(makeFace, 500);
    });
  };
  return faceRunner = {
    stop: function() {
      return clearTimeout(timeoutId);
    },
    start: function() {
      if (timeoutId == null) {
        return makeFace();
      }
    }
  };
};
